RewriteEngine On

# 1) Let Apache serve real existing files/dirs immediately
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# 2) Always serve built frontend assets directly
#    (Vite production build lives in public/build)
RewriteRule ^public/build/ - [L]

# 3) Serve Doctum API docs (static files)
RewriteRule ^api-docs/(.*)$ resources/views/api-docs/$1 [L]

# 4) /docs -> docs index
RewriteRule ^docs/?$ resources/views/docs/content/index.html [L]

# 5) Block direct access to sensitive project folders (optional hardening)
RewriteCond $1 ^(config|vendor|core|src|database|storage|tests|node_modules) [NC]
RewriteRule ^ - [R=404,L]

# 6) Everything else -> front controller
RewriteRule ^ index.php [QSA,L]
